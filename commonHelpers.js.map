{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function renderGallery(arr) {\n\treturn arr.map(({ webformatURL, largeImageURL, tags, views, downloads, likes, comments }) => {\n\t\treturn `\n\t\t<a href=\"${largeImageURL}\" class=\"gallery-item\">\n\t\t\t<div class=\"img-frame\">\n\t\t\t\t<img\n\t\t\t\t\tsrc=\"${webformatURL}\"\n\t\t\t\t\talt=\"${tags}\" title=\"${tags}\">\n\t\t\t\t\t<ul class=\"img-info\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<p class=\"info-headers\">Likes</p>\n\t\t\t\t\t\t<p class=\"info-text\">${likes}</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<p class=\"info-headers\">Views</p>\n\t\t\t\t\t\t<p class=\"info-text\">${views}</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<p class=\"info-headers\">Comments</p>\n\t\t\t\t\t\t<p class=\"info-text\">${comments}</p>\n\t\t\t\t\t</li>\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<p class=\"info-headers\">Downloads</p>\n\t\t\t\t\t\t<p class=\"info-text\">${downloads}</p>\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</a>\n\t`;\n\t}).join('');\n}\n","import { renderGallery } from \"./js/render-functions\";\n// import { fetchImages } from \"./js/pixabay-api\";\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\n\nimport axios from \"axios\";\naxios.defaults.baseURL = \"https://pixabay.com/api/\";\nconst API_KEY = \"44037717-f466124c8e4208be15c31102c\";\n\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nconst selectors = {\n\tform: document.querySelector('form'),\n\tframe: document.querySelector('.gallery'),\n\tloader: document.querySelector('.loader'),\n\tlightbox: new SimpleLightbox('.gallery a'),\n\tloadMore: document.querySelector('.load-more'),\n};\nconst { form, frame, loader, lightbox, loadMore, card } = selectors;\nlet pageIncrement;\nlet querryValue;\nform.addEventListener(\"submit\", (event) => {\n\tevent.preventDefault();\n\tpageIncrement = 1;\n\tif (!event.target.querry.value) {\n\t\tiziToast.error({\n\t\t\ttitle: \"Error\",\n\t\t\tmessage: \"Your search query must not be empty. Please try again!\",\n\t\t\tposition: \"topRight\",\n\t\t\ttimeout: 3500,\n\t\t});\n\t\treturn;\n\t}\n\n\tframe.innerHTML = \"\";\n\tloader.classList.remove(\"hidden\");\n\n\tquerryValue = event.target.querry.value.trim().split(\" \").join(\"+\");\n\tfetchImages(querryValue).then(res => {\n\t\tif (!res.hits.length) {\n\t\t\tiziToast.error({\n\t\t\t\ttitle: \"Error\",\n\t\t\t\tmessage: \"Sorry, there are no images matching your search query. Please try again!\",\n\t\t\t\tposition: \"topRight\",\n\t\t\t\ttimeout: 3500,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tframe.insertAdjacentHTML(\"beforeend\", renderGallery(res.hits));\n\t\tlightbox.refresh();\n\t\tloadMore.classList.remove(\"hidden\");\n\t\tif (Math.ceil(res.totalHits / 15) <= 1) {\n\t\t\tloadMore.classList.add(\"hidden\");\n\t\t\tiziToast.info({\n\t\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\t\tposition: \"topRight\",\n\t\t\t\ttimeout: 3500,\n\t\t\t});\n\t\t}\n\t})\n\t\t.catch(error => {\n\t\t\tconsole.log(error);\n\t\t})\n\t\t.finally(() => {\n\t\t\tform.reset();\n\t\t\tloader.classList.add(\"hidden\");\n\t\t});\n\n});\n\n\nloadMore.addEventListener(\"click\", () => {\n\tconst lastArticle = document.querySelector('.img-frame');\n\tconst cardHeight = lastArticle.getBoundingClientRect().height;\n\tconst scrollHeight = cardHeight * 2;\n\n\tpageIncrement++;\n\tloader.classList.remove(\"hidden\");\n\tloadMore.classList.add(\"hidden\");\n\n\tfetchImages(querryValue).then((res) => {\n\t\tif (pageIncrement === Math.ceil(res.totalHits / 15)) {\n\t\t\tloader.classList.add(\"hidden\");\n\t\t\tloadMore.classList.add(\"hidden\");\n\t\t\tiziToast.info({\n\t\t\t\tmessage: \"We're sorry, but you've reached the end of search results.\",\n\t\t\t\tposition: \"topRight\",\n\t\t\t\ttimeout: 3500,\n\t\t\t});\n\t\t}\n\t\tframe.insertAdjacentHTML(\"beforeend\", renderGallery(res.hits));\n\t\tlightbox.refresh();\n\t\tloader.classList.add(\"hidden\");\n\n\t\twindow.scrollBy({\n\t\t\ttop: scrollHeight,\n\t\t\tleft: 0,\n\t\t\tbehavior: 'smooth',\n\t\t});\n\t}).catch(console.log);\n});\n\n\nasync function fetchImages(querryValue) {\n\tconst respose = await axios.get(`?`, {\n\t\tparams: {\n\t\t\tq: querryValue,\n\t\t\tsafesearch: \"true\",\n\t\t\timage_type: \"photo\",\n\t\t\torientation: \"horizontal\",\n\t\t\tkey: API_KEY,\n\t\t\tpage: pageIncrement,\n\t\t\tper_page: 15,\n\t\t}\n\t});\n\treturn respose.data;\n}\n"],"names":["renderGallery","arr","webformatURL","largeImageURL","tags","views","downloads","likes","comments","axios","API_KEY","selectors","SimpleLightbox","form","frame","loader","lightbox","loadMore","card","pageIncrement","querryValue","event","iziToast","fetchImages","res","error","scrollHeight"],"mappings":"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"}